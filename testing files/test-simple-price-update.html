<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Price Update Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .book-details { 
            background: #f8f9fa; 
            padding: 20px; 
            border-radius: 8px; 
            margin: 20px 0;
        }
        .price-quantity { 
            display: flex; 
            align-items: center; 
            gap: 20px; 
            margin: 15px 0;
        }
        .price { 
            font-size: 24px; 
            font-weight: bold; 
            color: #007bff;
            transition: all 0.3s ease;
        }
        .quantity-control { display: flex; align-items: center; gap: 10px; }
        .quantity-control input { 
            width: 80px; 
            padding: 8px; 
            border: 1px solid #ddd; 
            border-radius: 4px;
        }
        .test-result {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Simple Price Update Test</h1>
    
    <div class="test-result">
        <h3>Expected Behavior:</h3>
        <ul>
            <li>Change quantity to 2 â†’ Price should immediately show "Rs. 3800.00"</li>
            <li>Price should briefly scale up and turn green</li>
            <li>Then return to normal blue color</li>
            <li>This should work exactly as it did 48 hours ago</li>
        </ul>
    </div>
    
    <div class="book-details">
        <h3>THE LEGEND OF RAVANA</h3>
        <p>by Nalin Goonewardene</p>
        <div class="price-quantity">
            <span class="price" id="bookPrice">Rs. 1900.00</span>
            <div class="quantity-control">
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity" value="1" min="1">
            </div>
        </div>
        <p>Nalin Goonewardene's book masterfully humanizes King Ravana and relates his struggles to protect his family and values.</p>
    </div>

    <script>
        // Global variable to store current book's base price (same as order.js)
        let currentBookBasePrice = 1900.00;
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Test page loaded");
            
            // Initialize quantity handler
            initializeQuantityHandler();
        });
        
        // Initialize quantity change handler (same as order.js)
        function initializeQuantityHandler() {
            const quantityInput = document.getElementById('quantity');
            
            if (quantityInput) {
                quantityInput.addEventListener('change', updateQuantityDisplay);
                quantityInput.addEventListener('input', updateQuantityDisplay);
                console.log("Event listeners attached");
                
                // Initial calculation
                updateQuantityDisplay();
            }
        }
        
        // Update quantity display with animation (same as order.js)
        function updateQuantityDisplay() {
            const quantityInput = document.getElementById('quantity');
            const bookPrice = document.getElementById('bookPrice');
            
            if (quantityInput && bookPrice) {
                const quantity = parseInt(quantityInput.value) || 1;
                
                // Calculate total price
                const totalPrice = currentBookBasePrice * quantity;
                
                // Update price with animation
                bookPrice.textContent = `Rs. ${totalPrice.toFixed(2)}`;
                
                // Add animation effect
                bookPrice.style.transform = 'scale(1.1)';
                bookPrice.style.color = '#28a745';
                bookPrice.style.fontWeight = 'bold';
                
                // Reset animation after 300ms
                setTimeout(() => {
                    bookPrice.style.transform = 'scale(1)';
                    bookPrice.style.color = '#007bff';
                    bookPrice.style.fontWeight = 'normal';
                }, 300);
                
                console.log("Price updated:", totalPrice, "for quantity:", quantity);
            }
        }
    </script>
</body>
</html> 